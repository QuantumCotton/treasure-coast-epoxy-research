# 2026-01-28 (Final Update)

## ZAI Agent Keys - Final Configuration

**Time:** 03:37 UTC

**Issue:** User wanted clear separation of 2 zai API keys to prevent mix-ups and ensure proper usage patterns.

**Keys Configured:**

| Agent | Model | API Key | Priority | Purpose |
|-------|--------|---------|----------|---------|
| Primary | zai/glm-4.7 | a25366c2cf4243fca4be5c7d94252fe1.y975sZd1Xs70zzxz | ALWAYS | Default for all tasks |
| Backup | zai/glm-4.7 | b69d7542ebd2457ba34c10aa2f08ee7a.ZXaM5J3YOOpOB116 | Fallback | ONLY when primary rate-limited |
| Vision | zai/glm-4.6v | a25366c2cf4243fca4be5c7d94252fe1.y975sZd1Xs70zzxz | Vision | ONLY for image processing |

**Critical Rules Implemented:**

1. **NEVER mix keys up**
   - Primary key: Use for everything by default
   - Backup key: Use ONLY when primary is rate-limited
   - Vision key: Use ONLY for images you send

2. **Spawn Patterns**
   ```
   # Default (uses primary)
   sessions_spawn(task="...", agentId="main", model="zai/glm-4.7")
   
   # Backup (only when rate-limited)
   sessions_spawn(task="...", agentId="main", model="zai/glm-4.7-backup")
   
   # Vision (only for images)
   sessions_spawn(task="...", agentId="main", model="zai/glm-4.6v")
   ```

3. **Vision Agent Workflow**
   - When user sends image → Spawn vision agent with zai/glm-4.6v model
   - Vision agent analyzes: transcription, content, details
   - Vision agent reports back to main agent
   - Main agent provides summary to user
   - Main agent can ask vision agent follow-up questions

**Config File:** `/home/chris/.clawdbot/clawdbot.json`

**Gateway Status:** Auto-restarted to apply config changes

**Test Results:**
- ✅ 3-agent parallel spawn tested successfully
- ✅ No agent conflicts or cancellations
- ❓ Backup agent (old key) never responded (configuration issue)
- ⚠️ Need to test vision agent with new key configuration

**Status:** Configuration complete. Ready for vision testing.
